<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Management Dashboard</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<header>
  <div>
    <div class="brand">ATR 2026 - Shutdown Daily Progress Report</div>
    <div class="sub">Inspection Department</div>
  </div>
  <nav class="nav">
    <a href="/index.html">Inspection List</a>
    <a href="/form.html">Add / Edit Form</a>
    <a class="active" href="/dashboard.html">Management Dashboard</a>
  </nav>
</header>

<div class="container">
  <section class="card row">
    <input id="username" placeholder="Your name">
    <select id="role">
      <option value="management">Management</option>
      <option value="user">EIS User</option>
      <option value="admin">Admin</option>
    </select>
    <button id="saveUser">Apply User</button>
    <label>Filter by Final Status
      <select id="dash_final_status"><option value="">All</option></select>
    </label>
    <label>Filter by Equipment Type
      <select id="dash_equipment_type"><option value="">All</option></select>
    </label>
    <button id="dashApplyFilter">Apply</button>
  </section>

  <section class="kpi" id="kpiWrap">
    <div class="box"><div>Total Records</div><h2 id="kTotal">0</h2></div>
    <div class="box clickable" data-status="Completed"><div>Completed</div><h2 id="kCompleted">0</h2></div>
    <div class="box clickable" data-status="In Progress"><div>In Progress</div><h2 id="kProgress">0</h2></div>
    <div class="box clickable" data-status="Not Started"><div>Not Started</div><h2 id="kNotStarted">0</h2></div>
  </section>

  <section class="grid2">
    <div class="card">
      <h3>Final Status Distribution</h3>
      <canvas id="statusDonut" width="420" height="260"></canvas>
    </div>
    <div class="card">
      <h3>Equipment Type Progress</h3>
      <canvas id="equipmentBars" width="420" height="260"></canvas>
    </div>
  </section>

  <section class="card table-wrap">
    <div class="row"><h3 style="margin:0">Unit Progress Summary (click to filter below)</h3></div>
    <table>
      <thead><tr><th>Unit</th><th>Total</th><th>Completed</th><th>In Progress</th><th>Not Started</th></tr></thead>
      <tbody id="unitSummaryRows"></tbody>
    </table>
  </section>

  <section class="card table-wrap">
    <div class="row"><h3 style="margin:0">Detailed Records</h3><span id="dashInfo" class="badge">All records</span></div>
    <table>
      <thead><tr><th>ID</th><th>Unit</th><th>Equipment</th><th>Tag</th><th>Status</th><th>Final</th><th>Updated By</th><th>Updated At</th></tr></thead>
      <tbody id="dashRows"></tbody>
    </table>
  </section>
</div>

<script src="/app.js"></script>
<script>window.pageName='dashboard';</script>
</body>
</html>
